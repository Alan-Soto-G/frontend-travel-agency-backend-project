<div class="dashboard-container">
  <h1>ğŸ“Š Dashboard de Reportes y AnÃ¡lisis</h1>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Cargando datos del dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <p>{{ error }}</p>
    <button (click)="loadDashboardData()" class="retry-btn">Reintentar</button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && !error">
    <!-- KPIs Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon total">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
        </div>
        <h3>Total Viajes</h3>
        <p class="stat-number">{{ statistics?.totalTrips | number:'1.0-0' }}</p>
      </div>

      <div class="stat-card">
        <div class="stat-icon active">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <h3>Viajes Activos</h3>
        <p class="stat-number">{{ statistics?.activeTrips | number:'1.0-0' }}</p>
      </div>

      <div class="stat-card">
        <div class="stat-icon completed">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
        </div>
        <h3>Viajes Completados</h3>
        <p class="stat-number">{{ statistics?.completedTrips | number:'1.0-0' }}</p>
      </div>

      <div class="stat-card">
        <div class="stat-icon revenue">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3>Ingresos Totales</h3>
        <p class="stat-number">{{ statistics?.totalRevenue | currency:'COP':'symbol-narrow':'1.0-0' }}</p>
      </div>

      <div class="stat-card">
        <div class="stat-icon average">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"></line>
            <line x1="12" y1="20" x2="12" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="14"></line>
          </svg>
        </div>
        <h3>Precio Promedio</h3>
        <p class="stat-number">{{ statistics?.averageTripPrice | currency:'COP':'symbol-narrow':'1.0-0' }}</p>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
      <div class="chart-card">
        <h2>ğŸ“ˆ HistÃ³rico de Ingresos</h2>
        <div class="chart-container">
          <canvas baseChart
                  [data]="lineChartData"
                  [options]="lineChartOptions"
                  type="line">
          </canvas>
        </div>
      </div>

      <div class="chart-card">
        <h2>ğŸš— DistribuciÃ³n de Transporte</h2>
        <div class="chart-container">
          <canvas baseChart
                  [data]="pieChartData"
                  [options]="pieChartOptions"
                  type="pie">
          </canvas>
        </div>
      </div>

      <div class="chart-card full-width">
        <h2>ğŸ™ï¸ Viajes por Municipio</h2>
        <div class="chart-container">
          <canvas baseChart
                  [data]="barChartData"
                  [options]="barChartOptions"
                  type="bar">
          </canvas>
        </div>
      </div>
    </div>
  </div>
</div>

